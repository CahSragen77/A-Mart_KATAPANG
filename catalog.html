<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="Katalog produk A-Mart Katapang. Belanja beras, minyak, telur, daging, dan sembako lainnya dengan harga terjangkau.">
    <meta name="keywords" content="katalog, harga beras, harga minyak, harga telur, sembako, belanja online">
    
    <title>Katalog Produk - A-Mart Katapang</title>
    
    <!-- CSS - PERBAIKI PATH -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/elegant-colors.css">
    <link rel="stylesheet" href="css/mobile.css">
    
    <!-- Favicon -->
    <link rel="icon" href="assets/images/favicon.ico">
    
    <!-- Mobile-specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#2a9d8f">
</head>
<body>
    <!-- HEADER -->
    <header class="main-header">
        <div class="logo">
            <img src="assets/images/logo.png" alt="A-Mart Katapang Logo" width="60" 
                 onerror="this.src='https://via.placeholder.com/60x60?text=A+Mart'">
        </div>
        <div class="title">
            <h1>A-Mart Katapang</h1>
            <p>Katalog Produk</p>
        </div>
        <div class="live-time" id="liveTime">
            <!-- Waktu akan diisi JS -->
        </div>
        
        <!-- MOBILE MENU TOGGLE -->
        <button class="mobile-menu-toggle" aria-label="Toggle menu" id="mobileMenuToggle">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>

    <!-- NAVIGASI -->
    <nav class="main-nav" id="mainNav">
        <ul>
            <li><a href="index.html">Beranda</a></li>
            <li><a href="location.html">Lokasi</a></li>
            <li><a href="catalog.html" class="active">Katalog & Belanja</a></li>
            <li><a href="feedback.html">Saran & Donasi</a></li>
        </ul>
    </nav>

    <!-- KONTEN UTAMA -->
    <main class="catalog-container">
        <h2 class="page-title">üõçÔ∏è Katalog Produk Kami</h2>
        <p class="page-subtitle">Klik produk untuk menambahkan ke keranjang belanja</p>
        
        <!-- FILTER -->
        <div class="filter-section">
            <button class="filter-btn active" data-filter="all">Semua Produk</button>
            <button class="filter-btn" data-filter="sembako">Sembako</button>
            <button class="filter-btn" data-filter="daging">Daging & Ikan</button>
            <button class="filter-btn" data-filter="buah">Buah & Sayur</button>
        </div>
        
        <!-- MOBILE CART TOGGLE -->
        <button class="mobile-cart-toggle" id="mobileCartToggle">
            üõí Keranjang <span id="cart-badge" class="cart-badge">0</span>
        </button>
        
        <!-- KERANJANG SIDEBAR -->
        <div id="cart-sidebar" class="cart-sidebar">
            <div class="cart-header">
                <h3>üõí Keranjang Belanja</h3>
                <button class="close-cart" id="closeCart">&times;</button>
            </div>
            <div id="cart-items">
                <p class="empty-cart">Keranjang masih kosong</p>
            </div>
            <div class="cart-total">
                <p>Total: <span id="cart-total-price">Rp 0</span></p>
            </div>
            <button id="checkout-btn" class="checkout-btn" disabled>
                Checkout via WhatsApp
            </button>
            <button id="clear-cart" class="clear-btn">
                Hapus Semua
            </button>
        </div>
        
        <!-- PRODUK GRID -->
        <div class="catalog-grid">
            <!-- Produk 1 -->
            <div class="product-card" data-category="sembako">
                <div class="product-image">
                    <img src="assets/images/products/telur.jpg" alt="Telur Ayam" 
                         onerror="this.src='https://via.placeholder.com/300x200?text=Telur+Ayam'">
                    <span class="product-badge">Terlaris</span>
                </div>
                <h3>Telur Ayam Segar</h3>
                <p class="price">Rp 28.000 / kg</p>
                <p class="unit">Rp 5.000 / butir</p>
                <button class="add-to-cart" data-product="Telur Ayam" data-price="28000">
                    + Keranjang
                </button>
            </div>
            
            <!-- Produk 2 -->
            <div class="product-card" data-category="sembako">
                <div class="product-image">
                    <img src="assets/images/products/beras.jpg" alt="Beras Premium"
                         onerror="this.src='https://via.placeholder.com/300x200?text=Beras+Premium'">
                </div>
                <h3>Beras Premium</h3>
                <p class="price">Rp 12.500 / kg</p>
                <p class="unit">Rp 125.000 / 10kg</p>
                <button class="add-to-cart" data-product="Beras Premium" data-price="12500">
                    + Keranjang
                </button>
            </div>
            
            <!-- Produk 3 -->
            <div class="product-card" data-category="minyak">
                <div class="product-image">
                    <img src="assets/images/products/minyak.jpg" alt="Minyak Goreng"
                         onerror="this.src='https://via.placeholder.com/300x200?text=Minyak+Goreng'">
                    <span class="product-badge promo">Promo</span>
                </div>
                <h3>Minyak Goreng</h3>
                <p class="price">Rp 18.000 / liter</p>
                <p class="price-old">Rp 22.000</p>
                <button class="add-to-cart" data-product="Minyak Goreng" data-price="18000">
                    + Keranjang
                </button>
            </div>
            
            <!-- Produk 4-12 (Contoh tambahan) -->
            <div class="product-card" data-category="daging">
                <div class="product-image">
                    <img src="assets/images/products/ayam.jpg" alt="Daging Ayam"
                         onerror="this.src='https://via.placeholder.com/300x200?text=Daging+Ayam'">
                </div>
                <h3>Daging Ayam</h3>
                <p class="price">Rp 35.000 / kg</p>
                <button class="add-to-cart" data-product="Daging Ayam" data-price="35000">
                    + Keranjang
                </button>
            </div>
            
            <div class="product-card" data-category="buah">
                <div class="product-image">
                    <img src="assets/images/products/apel.jpg" alt="Apel Merah"
                         onerror="this.src='https://via.placeholder.com/300x200?text=Apel+Merah'">
                </div>
                <h3>Apel Merah</h3>
                <p class="price">Rp 25.000 / kg</p>
                <button class="add-to-cart" data-product="Apel Merah" data-price="25000">
                    + Keranjang
                </button>
            </div>
            
            <!-- Tambahkan produk lainnya sesuai kebutuhan -->
        </div>
        
        <!-- LOAD MORE BUTTON -->
        <div class="load-more-section">
            <button class="load-more-btn" id="loadMore">
                Tampilkan Lebih Banyak Produk
            </button>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="main-footer">
        <div class="footer-content">
            <p>&copy; 2023 A-Mart Katapang. All rights reserved.</p>
            <p>üìû (022) 87654321 | üìç Jl. Katapang Indah No. 123</p>
            <p class="footer-note">üïí Buka: 07:00 - 21:00 WIB | Setiap Hari</p>
        </div>
    </footer>

    <!-- JAVASCRIPT -->
    <script src="js/datetime.js"></script>
    <script src="js/cart.js"></script>
    
    <!-- RESPONSIVE CSS LANGSUNG -->
    <style>
        /* ==================== */
        /* RESPONSIVE OVERRIDES */
        /* ==================== */
        
        /* MOBILE MENU TOGGLE */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            width: 30px;
            height: 30px;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            padding: 0;
        }
        
        .mobile-menu-toggle span {
            display: block;
            height: 3px;
            width: 100%;
            background: white;
            border-radius: 3px;
            transition: 0.3s;
        }
        
        /* MOBILE CART TOGGLE */
        .mobile-cart-toggle {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #2a9d8f;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(42, 157, 143, 0.3);
            z-index: 999;
            cursor: pointer;
            font-weight: bold;
        }
        
        .cart-badge {
            background: #e76f51;
            color: white;
            border-radius: 50%;
            padding: 2px 8px;
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        /* CATALOG CONTAINER */
        .catalog-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem;
            position: relative;
        }
        
        /* FILTER SECTION */
        .filter-section {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 2rem 0;
            flex-wrap: wrap;
            padding: 0 10px;
        }
        
        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #2a9d8f;
            background: white;
            color: #2a9d8f;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            white-space: nowrap;
        }
        
        .filter-btn.active,
        .filter-btn:hover {
            background: #2a9d8f;
            color: white;
            transform: translateY(-2px);
        }
        
        /* CATALOG GRID */
        .catalog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
            padding: 0 10px;
        }
        
        .product-card {
            background: white;
            border-radius: 15px;
            padding: 1.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
            text-align: center;
            display: flex;
            flex-direction: column;
            border: 1px solid #f0f0f0;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
        }
        
        .product-image {
            position: relative;
            margin-bottom: 1rem;
            overflow: hidden;
            border-radius: 10px;
            height: 200px;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e76f51;
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        .product-badge.promo {
            background: #2a9d8f;
        }
        
        .product-card h3 {
            margin: 0.5rem 0;
            color: #333;
            font-size: 1.1rem;
            flex-grow: 1;
        }
        
        .product-card .price {
            color: #e76f51;
            font-weight: bold;
            font-size: 1.3rem;
            margin: 0.5rem 0;
        }
        
        .price-old {
            color: #999;
            text-decoration: line-through;
            font-size: 0.9rem;
            margin-right: 10px;
        }
        
        .product-card .unit {
            color: #666;
            font-size: 0.9rem;
            margin: 5px 0;
        }
        
        .add-to-cart {
            background: #2a9d8f;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            margin-top: auto;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 0.95rem;
        }
        
        .add-to-cart:hover {
            background: #21867a;
            transform: scale(1.02);
        }
        
        /* CART SIDEBAR */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: white;
            padding: 1.5rem;
            box-shadow: -5px 0 25px rgba(0,0,0,0.15);
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .cart-sidebar.active {
            right: 0;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #2a9d8f;
        }
        
        .cart-header h3 {
            color: #2a9d8f;
            margin: 0;
        }
        
        .close-cart {
            background: none;
            border: none;
            font-size: 2rem;
            color: #666;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #cart-items {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .cart-item button {
            background: #e76f51;
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
        }
        
        .cart-total {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 1rem 0;
            text-align: center;
            border: 2px solid #2a9d8f;
        }
        
        .cart-total p {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin: 0;
        }
        
        .checkout-btn, .clear-btn {
            padding: 14px;
            width: 100%;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .checkout-btn {
            background: #2a9d8f;
            color: white;
        }
        
        .checkout-btn:hover:not(:disabled) {
            background: #21867a;
            transform: translateY(-2px);
        }
        
        .checkout-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .clear-btn {
            background: #e76f51;
            color: white;
        }
        
        .clear-btn:hover {
            background: #d65c3e;
            transform: translateY(-2px);
        }
        
        .load-more-section {
            text-align: center;
            margin: 3rem 0;
        }
        
        .load-more-btn {
            background: #2a9d8f;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(42, 157, 143, 0.3);
        }
        
        .load-more-btn:hover {
            background: #21867a;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(42, 157, 143, 0.4);
        }
        
        /* ============ */
        /* RESPONSIVE   */
        /* ============ */
        
        /* TABLET */
        @media (max-width: 1024px) {
            .catalog-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 1.2rem;
            }
            
            .cart-sidebar {
                width: 350px;
            }
        }
        
        /* TABLET KECIL */
        @media (max-width: 768px) {
            .catalog-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
            
            .filter-section {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 10px;
                margin: 1.5rem 0;
            }
            
            .filter-btn {
                flex-shrink: 0;
            }
            
            .mobile-cart-toggle {
                display: block;
            }
            
            .mobile-menu-toggle {
                display: flex;
            }
            
            .main-nav {
                position: fixed;
                top: 80px;
                left: -100%;
                width: 100%;
                background: #264653;
                transition: left 0.3s ease;
                z-index: 999;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            }
            
            .main-nav.active {
                left: 0;
            }
            
            .main-nav ul {
                flex-direction: column;
                padding: 1rem;
            }
            
            .main-nav li {
                margin: 0.5rem 0;
                width: 100%;
            }
            
            .main-nav a {
                display: block;
                padding: 1rem;
                text-align: center;
                border-radius: 8px;
            }
        }
        
        /* MOBILE */
        @media (max-width: 480px) {
            .catalog-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
                padding: 0 5px;
            }
            
            .catalog-container {
                padding: 0.5rem;
            }
            
            .page-title {
                font-size: 1.5rem;
            }
            
            .page-subtitle {
                font-size: 0.9rem;
            }
            
            .filter-btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .product-image {
                height: 180px;
            }
            
            .product-card {
                padding: 1rem;
            }
            
            .product-card h3 {
                font-size: 1rem;
            }
            
            .mobile-cart-toggle {
                bottom: 15px;
                right: 15px;
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            
            .main-header {
                padding: 0.8rem 1rem;
            }
            
            .title h1 {
                font-size: 1.3rem;
            }
            
            .title p {
                font-size: 0.8rem;
            }
            
            .live-time {
                font-size: 0.8rem;
                padding: 0.3rem 0.8rem;
            }
        }
        
        /* VERY SMALL MOBILE */
        @media (max-width: 360px) {
            .catalog-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-section {
                gap: 8px;
            }
            
            .filter-btn {
                padding: 7px 14px;
                font-size: 0.8rem;
            }
            
            .mobile-cart-toggle {
                font-size: 0.8rem;
                padding: 8px 14px;
            }
        }
        
        /* LANDSCAPE MODE */
        @media (max-height: 600px) and (orientation: landscape) {
            .cart-sidebar {
                height: 90vh;
                top: 10vh;
            }
            
            .mobile-cart-toggle {
                bottom: 10px;
            }
        }
        
        /* DARK MODE SUPPORT */
        @media (prefers-color-scheme: dark) {
            .product-card {
                background: #2d2d2d;
                color: #f0f0f0;
                border-color: #444;
            }
            
            .product-card h3 {
                color: #f0f0f0;
            }
            
            .cart-sidebar {
                background: #2d2d2d;
                color: #f0f0f0;
            }
            
            .cart-total {
                background: #3d3d3d;
                color: #f0f0f0;
            }
        }
    </style>
    
    <!-- RESPONSIVE JAVASCRIPT -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Catalog page loaded - Responsive version');
            
            // =====================
            // MOBILE MENU TOGGLE
            // =====================
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mainNav = document.getElementById('mainNav');
            
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    mainNav.classList.toggle('active');
                    this.classList.toggle('active');
                });
            }
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!mainNav.contains(e.target) && !mobileMenuToggle.contains(e.target)) {
                    mainNav.classList.remove('active');
                    mobileMenuToggle.classList.remove('active');
                }
            });
            
            // =====================
            // MOBILE CART TOGGLE
            // =====================
            const mobileCartToggle = document.getElementById('mobileCartToggle');
            const closeCart = document.getElementById('closeCart');
            const cartSidebar = document.getElementById('cart-sidebar');
            
            if (mobileCartToggle) {
                mobileCartToggle.addEventListener('click', function() {
                    cartSidebar.classList.add('active');
                });
            }
            
            if (closeCart) {
                closeCart.addEventListener('click', function() {
                    cartSidebar.classList.remove('active');
                });
            }
            
            // Close cart when clicking outside (desktop)
            document.addEventListener('click', function(e) {
                if (window.innerWidth > 768) {
                    if (!cartSidebar.contains(e.target) && 
                        !e.target.closest('.add-to-cart') &&
                        !e.target.closest('.mobile-cart-toggle')) {
                        cartSidebar.classList.remove('active');
                    }
                }
            });
            
            // =====================
            // UPDATE TIME
            // =====================
            function updateTime() {
                const now = new Date();
                const options = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                };
                
                const timeElement = document.getElementById('liveTime');
                if (timeElement) {
                    timeElement.textContent = now.toLocaleDateString('id-ID', options);
                }
            }
            
            updateTime();
            setInterval(updateTime, 60000);
            
            // =====================
            // CART FUNCTIONALITY
            // =====================
            let cart = JSON.parse(localStorage.getItem('amart_cart')) || [];
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total-price');
            const checkoutBtn = document.getElementById('checkout-btn');
            const clearBtn = document.getElementById('clear-cart');
            const cartBadge = document.getElementById('cart-badge');
            
            // Update cart display
            function updateCartDisplay() {
                // Update cart badge
                if (cartBadge) {
                    cartBadge.textContent = cart.length;
                    cartBadge.style.display = cart.length > 0 ? 'inline-block' : 'none';
                }
                
                // Update cart items
                if (cart.length === 0) {
                    cartItems.innerHTML = '<p class="empty-cart">Keranjang masih kosong</p>';
                } else {
                    let html = '';
                    let total = 0;
                    
                    cart.forEach((item, index) => {
                        total += item.price * item.quantity;
                        html += `
                            <div class="cart-item">
                                <div>
                                    <strong>${item.product}</strong>
                                    <div style="font-size: 0.9rem; color: #666;">
                                        ${item.quantity} √ó Rp ${item.price.toLocaleString()}
                                    </div>
                                </div>
                                <button onclick="removeCartItem(${index})" aria-label="Hapus item">√ó</button>
                            </div>
                        `;
                    });
                    
                    cartItems.innerHTML = html;
                    cartTotal.textContent = 'Rp ' + total.toLocaleString();
                }
                
                // Toggle checkout button
                if (checkoutBtn) {
                    checkoutBtn.disabled = cart.length === 0;
                }
                
                // Save to localStorage
                localStorage.setItem('amart_cart', JSON.stringify(cart));
            }
            
            // Add to cart
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const product = this.getAttribute('data-product');
                    const price = parseInt(this.getAttribute('data-price'));
                    
                    // Check if product already in cart
                    const existingItem = cart.find(item => item.product === product);
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        cart.push({ 
                            product, 
                            price, 
                            quantity: 1,
                            image: this.closest('.product-card').querySelector('img').src
                        });
                    }
                    
                    updateCartDisplay();
                    
                    // Show cart sidebar on mobile after adding item
                    if (window.innerWidth <= 768) {
                        cartSidebar.classList.add('active');
                    }
                    
                    // Visual feedback
                    const originalText = this.textContent;
                    this.textContent = '‚úì Ditambahkan';
                    this.style.background = '#2a9d8f';
                    
                    setTimeout(() => {
                        this.textContent = originalText;
                        this.style.background = '';
                    }, 1000);
                });
            });
            
            // Clear cart
            if (clearBtn) {
                clearBtn.addEventListener('click', function() {
                    if (cart.length > 0 && confirm('Hapus semua item dari keranjang?')) {
                        cart = [];
                        updateCartDisplay();
                    }
                });
            }
            
            // Checkout via WhatsApp
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', function() {
                    if (cart.length === 0) return;
                    
                    let message = "Halo A-Mart Katapang, saya ingin order:\n\n";
                    let total = 0;
                    
                    cart.forEach(item => {
                        const itemTotal = item.price * item.quantity;
                        message += `‚Ä¢ ${item.product} (${item.quantity} √ó Rp ${item.price.toLocaleString()}) = Rp ${itemTotal.toLocaleString()}\n`;
                        total += itemTotal;
                    });
                    
                    message += `\nüí∞ Total: Rp ${total.toLocaleString()}\n`;
                    message += `üì¶ Alamat pengiriman:\n`;
                    message += `üë§ Nama penerima:\n`;
                    message += `üì± No. HP:\n\n`;
                    message += `_*Mohon konfirmasi ketersediaan dan total biaya termasuk ongkir*_`;
                    
                    // Ganti dengan nomor WhatsApp A-Mart yang benar
                    const whatsappUrl = `https://wa.me/6281234567890?text=${encodeURIComponent(message)}`;
                    window.open(whatsappUrl, '_blank');
                });
            }
            
            // Global function untuk remove item
            window.removeCartItem = function(index) {
                cart.splice(index, 1);
                updateCartDisplay();
            };
            
            // Filter products
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    // Update active button
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Filter products
                    const filter = this.getAttribute('data-filter');
                    document.querySelectorAll('.product-card').forEach(card => {
                        if (filter === 'all' || card.getAttribute('data-category') === filter) {
                            card.style.display = 'flex';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
            
            // Load more products
            const loadMoreBtn = document.getElementById('loadMore');
            if (loadMoreBtn) {
                loadMoreBtn.addEventListener('click', function() {
                    // Simulasi load more produk
                    const newProducts = [
                        { name: "Gula Pasir", price: 15000, category: "sembako" },
                        { name: "Mie Instan", price: 3000, category: "sembako" },
                        { name: "Kecap Manis", price: 12000, category: "sembako" },
                        { name: "Ikan Segar", price: 30000, category: "daging" },
                        { name: "Jeruk", price: 20000, category: "buah" },
                        { name: "Wortel", price: 8000, category: "buah" }
                    ];
                    
                    const catalogGrid = document.querySelector('.catalog-grid');
                    
                    newProducts.forEach((product, index) => {
                        const productCard = document.createElement('div');
                        productCard.className = 'product-card';
                        productCard.setAttribute('data-category', product.category);
                        
                        productCard.innerHTML = `
                            <div class="product-image">
                                <img src="https://via.placeholder.com/300x200?text=${encodeURIComponent(product.name)}" 
                                     alt="${product.name}">
                            </div>
                            <h3>${product.name}</h3>
                            <p class="price">Rp ${product.price.toLocaleString()}</p>
                            <button class="add-to-cart" 
                                    data-product="${product.name}" 
                                    data-price="${product.price}">
                                + Keranjang
                            </button>
                        `;
                        
                        catalogGrid.appendChild(productCard);
                    });
                    
                    // Re-attach event listeners to new buttons
                    document.querySelectorAll('.add-to-cart').forEach(button => {
                        button.addEventListener('click', function() {
                            const product = this.getAttribute('data-product');
                            const price = parseInt(this.getAttribute('data-price'));
                            
                            const existingItem = cart.find(item => item.product === product);
                            if (existingItem) {
                                existingItem.quantity += 1;
                            } else {
                                cart.push({ 
                                    product, 
                                    price, 
                                    quantity: 1
                                });
                            }
                            
                            updateCartDisplay();
                            
                            // Visual feedback
                            const originalText = this.textContent;
                            this.textContent = '‚úì Ditambahkan';
                            this.style.background = '#2a9d8f';
                            
                            setTimeout(() => {
                                this.textContent = originalText;
                                this.style.background = '';
                            }, 1000);
                        });
                    });
                    
                    // Hide load more button after clicking
                    this.style.display = 'none';
                });
            }
            
            // Initialize cart display
            updateCartDisplay();
            
            // Auto-show cart on desktop if items exist
            if (window.innerWidth > 768 && cart.length > 0) {
                setTimeout(() => {
                    cartSidebar.classList.add('active');
                }, 1000);
            }
        });
    </script>
</body>
</html>
